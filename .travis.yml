---
# Travis Doc:
#
# * Build Lifecycle
#   - https://docs.travis-ci.com/user/customizing-the-build#The-Build-Lifecycle
#
# 1. OPTIONAL Install apt addons
# 2. OPTIONAL Install cache components
# .
# 3. before_install
# 4. install
# 5. before_script
# 6. script
# 7. OPTIONAL before_cache (for cleaning up cache)
# 8. after_success or after_failure
# .
# 9. OPTIONAL before_deploy
# 10. OPTIONAL deploy
# 11. OPTIONAL after_deploy
# .
# 12. after_script (just before shutting down the build environment)
#
#
sudo: required
services:
  - docker

language: python

install:
  - echo "---> Check Docker version" && docker version
  - echo "---> Installing CI utils" && pip install docker-compose invoke

# command to run tests
script:
  # Build
  - invoke build.cassh-server || travis_terminate 1
  - invoke build.cassh || travis_terminate 1
  # Lint
  #- invoke test.lint-server || travis_terminate 1
  - invoke test.lint-client || travis_terminate 1
  # End2End
  - invoke test.e2e || travis_terminate 1

